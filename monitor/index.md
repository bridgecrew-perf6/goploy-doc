# 监控中心

## 介绍

- 站点检测

通过 GET 请求指定的 url 匹配返回的状态码来确定站点是否异常，目前200 - 399之间状态码均为正常，否则为异常。
```
response = http.get({url}, {timeout})
if 200 < response.status || resp.StatusCode >= 400 {
    return error
}
```

- 端口检测

检测指定目标主机的 TCP 端口是否可以正常建立接连。
```
DialTimeout.({host}, {timeout})
```

- Ping 检测

使用 Ping 检测目标主机是否存活。
```
# Windows
ping -n 1 -w {timeout} {addr}

# Linux
ping -c 1 -W {timeout} {addr}
```

- 进程检测

检测指定目标主机的某个进程是否存活。
```
# 填写name即可
ps -ef | grep -v grep | grep {name}
```

- 自定义脚本检测

在指定主机上运行自定义的脚本，通过判断返回的退出状态码是否为 0 来确定是否有异常。脚本执行中输出的内容将作为报警的描述信息，可利用此特性来灵活控制 报警的规则和报警的内容。

## 配置说明
- 间隔： 每隔多长时间检测一次

- 连续失败次数： 连续指定次数检测失败后才会触发报警，例如：连续失败次数设置为3，则表示当出现故障时连续3次检测都为失败的情况才触发报警

- 通道沉默周期： 相同的检测失败事件在通道沉默周期内只触发一次报警，避免过于频繁重复的报警信息。例如：通道沉默设置为 5 分钟，第一次触发报警后，5分钟内再次触发相同的报警信息则不会发送。
